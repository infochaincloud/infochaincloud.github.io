(this["webpackJsonpnft-minter"]=this["webpackJsonpnft-minter"]||[]).push([[0],{126:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"GetCouponURIs","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"recipient","type":"address"},{"indexed":false,"internalType":"uint256[]","name":"couponIds","type":"uint256[]"}],"name":"UseCoupon","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"couponCode","type":"string"}],"name":"claimCoupon","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"consumeCoupons","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPendingCoupons","outputs":[{"internalType":"address[]","name":"","type":"address[]"},{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getUserCoupons","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"string","name":"couponCode","type":"string"},{"internalType":"string","name":"_tokenURI","type":"string"}],"name":"issueCoupon","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256[]","name":"couponIds","type":"uint256[]"}],"name":"useCoupon","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},167:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(57),c=n.n(r),i=n(7),o=n.n(i),u=n(12),l=n(10),d=(n(166),-1),p=0,j=1,b=2,m="0x28732443701Ad3302A8Baadf41504E53676F6171";n(167);n(90).config();var h=n(134),O=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.get(t).then((function(e){return{success:!0,pinJson:e.data}})).catch((function(e){return console.log(e),{success:!1,message:e.message}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=(n(90),n(126)),f=new(n(127))("https://api.baobab.klaytn.net:8651/"),y=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,s,r,c,i,u,d,p,j,b,h,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.trim()){e.next=2;break}return e.abrupt("return",{success:!1,status:"\u2757Please make sure all fields are completed before minting."});case 2:return e.next=4,new f.eth.Contract(x,m);case 4:return window.contract=e.sent,n={to:m,from:window.ethereum.selectedAddress,data:window.contract.methods.getPendingCoupons().encodeABI()},e.prev=6,e.next=9,window.ethereum.request({method:"eth_call",params:[n]});case 9:for(a=e.sent,s=f.eth.abi.decodeParameters(["address[]","string[]"],a),r=[],c=[],i=0;i<s[0].length;i++)u={address:s[0][i],couponURI:s[1][i]},r.push(u);for(d=r.reduce((function(e,t){return e[t.address]?e[t.address].count=e[t.address].count+1:e[t.address]={couponURI:t.couponURI,count:1},e}),{}),p=0,j=Object.entries(d);p<j.length;p++)b=Object(l.a)(j[p],2),h=b[0],O=b[1],c.push({address:h,couponURI:O.couponURI,count:O.count});return e.abrupt("return",{success:!0,couponUsageList:c});case 19:return e.prev=19,e.t0=e.catch(6),e.abrupt("return",{success:!1,status:"\ud83d\ude25 Something went wrong: "+e.t0.message});case 22:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.trim()){e.next=2;break}return e.abrupt("return",{success:!1,status:"\u2757Please make sure all fields are completed before minting."});case 2:return e.next=4,new f.eth.Contract(x,m);case 4:return window.contract=e.sent,n={to:m,from:window.ethereum.selectedAddress,data:window.contract.methods.consumeCoupons(t).encodeABI()},e.prev=6,e.next=9,window.ethereum.request({method:"eth_sendTransaction",params:[n]});case 9:return a=e.sent,f.eth.abi.decodeParameters(["bool"],a),e.abrupt("return",{success:!0});case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",{success:!1,status:"\ud83d\ude25 Something went wrong: "+e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),w=n(219),v=n(88),k=n(40),T=n(197),C=n(1),A=function(e){var t=e.walletAddress,n=e.couponUsage,s=e.setOpenReceive,r=e.setCouponUsageList,c=Object(a.useState)(null),i=Object(l.a)(c,2),d=i[0],p=i[1],j=Object(a.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1];Object(a.useEffect)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(n.couponURI);case 2:t=e.sent,p(t.pinJson);case 4:case"end":return e.stop()}}),e)}))));var x=function(){var e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,g(n.address);case 3:if(!e.sent.success){e.next=10;break}return s(!1),e.next=8,y(t);case 8:(a=e.sent).success?r(a.couponUsageList):console.log(a.message);case 10:h(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(w.a,{children:[Object(C.jsxs)(v.a,{size:"big",style:{margin:"5px"},children:[Object(C.jsx)(k.a,{name:"user"}),String(n.address).substring(0,6)+".."+String(n.address).substring(40),Object(C.jsx)(v.a.Detail,{children:null===d?"loading...":" Coupon "+String(d.couponName)+" x "+String(n.count)})]}),m?Object(C.jsxs)(T.a,{size:"small",color:"green",style:{margin:"5px"},children:[Object(C.jsx)(k.a,{name:"circle notch",loading:!0})," Receive"]}):Object(C.jsx)(T.a,{size:"small",color:"green",style:{margin:"5px"},onClick:x,children:"Receive"})]})},S=n(216),I=n(220),M=function(e){var t=e.walletAddress,n=e.couponUsageList,s=e.setCouponUsageList;console.log(n);var r=Object(a.useState)(!1),c=Object(l.a)(r,2),i=c[0],d=c[1],p=Object(a.useState)(!1),j=Object(l.a)(p,2),b=j[0],m=j[1];return Object(a.useEffect)(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>0&&m(!0);case 1:case"end":return e.stop()}}),e)})))),Object(C.jsxs)(S.a,{closeIcon:!0,open:i,trigger:Object(C.jsx)(I.a,{as:"h3",verticalAlign:"middle",children:b?Object(C.jsx)(k.a.Group,{size:"big",className:"blinking",style:{cursor:"grab"},children:Object(C.jsx)(k.a,{name:"bell"})}):Object(C.jsx)(k.a.Group,{size:"big",children:Object(C.jsx)(k.a,{name:"bell"})})}),onClose:function(){return d(!1)},onOpen:function(){return d(!0)},children:[Object(C.jsx)(I.a,{icon:"archive",content:"Coupon usage"}),Object(C.jsx)(S.a.Content,{children:n.map((function(e,n){return Object(C.jsx)(A,{walletAddress:t,couponUsage:e,setOpenReceive:d,setCouponUsageList:s})}))}),Object(C.jsx)(S.a.Actions,{children:Object(C.jsxs)(T.a,{color:"red",onClick:function(){return d(!1)},children:[Object(C.jsx)(k.a,{name:"remove"})," Close"]})})]})},U=function(e){var t=e.mode,n=e.walletAddress,a=e.couponUsageList,s=e.setCouponUsageList;return Object(C.jsxs)(w.a,{divided:"vertically",children:[Object(C.jsxs)(w.a.Row,{verticalAlign:"bottom",children:[Object(C.jsx)(w.a.Column,{float:"left",width:13,children:Object(C.jsxs)(I.a,{as:"h3",children:[Object(C.jsx)("span",{onClick:function(){window.location.reload()},style:{cursor:"grab"},children:t===b?Object(C.jsx)(k.a.Group,{size:"big",children:Object(C.jsx)(k.a,{name:"home"})}):Object(C.jsx)(k.a.Group,{size:"big",children:Object(C.jsx)(k.a,{name:"child"})})}),"Welcome \xa0",String(n).substring(0,6)+".."+String(n).substring(40)]})}),t===b?Object(C.jsx)(w.a.Column,{float:"right",width:3,textAlign:"right",children:Object(C.jsx)(M,{walletAddress:n,couponUsageList:a,setCouponUsageList:s})}):Object(C.jsx)("div",{})]}),Object(C.jsx)(w.a.Row,{})]})},_=n(218),L=n(153),R=function(e){var t=e.coupon;return Object(C.jsxs)(_.a,{centered:!0,children:[Object(C.jsx)(L.a,{src:"https://gateway.pinata.cloud/ipfs/".concat(t.ipfs_pin_hash),alt:t.name}),Object(C.jsxs)(_.a.Content,{textAlign:"center",children:[Object(C.jsx)(_.a.Header,{children:t.metadata.name}),Object(C.jsx)(_.a.Description,{children:t.metadata.keyvalues.couponDescription})]})]})},F=n(123),z=n(152),D=n(221),P=function(e){var t=e.onChangeImage,n=Object(a.useCallback)((function(e){console.log(e[0]),t(e[0])}),[t]),s=Object(z.a)({onDrop:n}),r=s.getRootProps,c=s.getInputProps;return Object(C.jsx)("div",Object(F.a)(Object(F.a)({},r()),{},{children:Object(C.jsxs)(D.a,{placeholder:!0,children:[Object(C.jsxs)(I.a,{icon:!0,children:[Object(C.jsx)(k.a,{name:"file image outline"}),"Drag and drop an image here or click to select an image"]}),Object(C.jsx)(T.a,{primary:!0,children:"Add Image"}),Object(C.jsx)("input",Object(F.a)({},c()))]})}))};n(90).config();var E="376acff0649b93fbeca6",B="68e7da8b0a97e6445246e0b28ea2156d9c6da54c4f3c71b2345067420446d18a",N=n(134),G=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Object({walletAddress:{value:t,op:"eq"}}),a=JSON.stringify(n),s="https://api.pinata.cloud/data/pinList?status=pinned&metadata[keyvalues]=".concat(a),e.abrupt("return",N.get(s,{headers:{pinata_api_key:E,pinata_secret_api_key:B}}).then((function(e){return{success:!0,pinList:e.data.rows}})).catch((function(e){return console.log(e),{success:!1,message:e.message}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(o.a.mark((function e(t,n,a,s){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.pinata.cloud/pinning/pinFileToIPFS",(r=new FormData).append("file",t),r.append("pinataMetadata",JSON.stringify({name:a,keyvalues:{walletAddress:n,couponDescription:s}})),e.abrupt("return",N.post("https://api.pinata.cloud/pinning/pinFileToIPFS",r,{maxBodyLength:"Infinity",headers:{"Content-Type":"multipart/form-data; boundary=".concat(r._boundary),pinata_api_key:E,pinata_secret_api_key:B}}).then((function(e){return{success:!0,pinataUrl:"https://gateway.pinata.cloud/ipfs/"+e.data.IpfsHash}})).catch((function(e){return console.log(e),{success:!1,message:e.message}})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,s){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.pinata.cloud/pinning/pinJSONToIPFS",e.abrupt("return",N.post("https://api.pinata.cloud/pinning/pinJSONToIPFS",t,{headers:{pinata_api_key:E,pinata_secret_api_key:B}}).then((function(e){return{success:!0,pinataUrl:"https://gateway.pinata.cloud/ipfs/"+e.data.IpfsHash}})).catch((function(e){return console.log(e),{success:!1,message:e.message}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=n(214),W=n(210),Y=n(211),K=function(e){var t=e.walletAddress,n=Object(a.useState)(""),s=Object(l.a)(n,2),r=s[0],c=s[1],i=Object(a.useState)(""),d=Object(l.a)(i,2),p=d[0],j=d[1],b=Object(a.useState)(null),m=Object(l.a)(b,2),h=m[0],O=m[1],x=Object(a.useState)(null),f=Object(l.a)(x,2),y=f[0],g=f[1],w=Object(a.useState)(""),v=Object(l.a)(w,2),A=(v[0],v[1],Object(a.useState)(!1)),M=Object(l.a)(A,2),U=M[0],_=M[1],R=Object(a.useState)(!1),F=Object(l.a)(R,2),z=F[0],D=F[1],E=Object(a.useState)(!1),B=Object(l.a)(E,2),N=B[0],G=B[1];Object(a.useEffect)(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(""),c("");case 2:case"end":return e.stop()}}),e)}))),[]);var q=function(){var e=Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.next=3,H(h,t,r,p);case 3:n=e.sent,console.log(n),G(!1),D(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(S.a,{closeIcon:!0,open:z,trigger:Object(C.jsxs)(k.a.Group,{size:"big",onMouseOver:function(){return _(!0)},onMouseLeave:function(){return _(!1)},style:{cursor:"grabbing"},children:[Object(C.jsx)(k.a,{name:"ticket"}),U?Object(C.jsx)(k.a,{corner:!0,loading:!0,name:"add"}):Object(C.jsx)(k.a,{corner:!0,name:"add"})]}),onClose:function(){return D(!1)},onOpen:function(){return D(!0)},children:[Object(C.jsx)(I.a,{icon:"add",content:"Add new coupon"}),Object(C.jsx)(S.a.Content,{children:Object(C.jsxs)(J.a,{children:[Object(C.jsx)(J.a.Field,{id:"form-input-control-name",control:W.a,label:"Coupon name",placeholder:"Coupon name",required:!0,onChange:function(e){c(e.target.value)}}),Object(C.jsx)(J.a.Field,{id:"form-textarea-control-description",control:Y.a,label:"Description",placeholder:"Description",required:!0,onChange:function(e){j(e.target.value)}}),y?Object(C.jsx)(L.a,{src:y}):Object(C.jsx)(P,{onChangeImage:function(e){O(e),g(URL.createObjectURL(e))}})]})}),Object(C.jsxs)(S.a.Actions,{children:[Object(C.jsxs)(T.a,{color:"red",onClick:function(){return D(!1)},children:[Object(C.jsx)(k.a,{name:"remove"})," Cancel"]}),N?Object(C.jsxs)(T.a,{color:"green",children:[Object(C.jsx)(k.a,{name:"circle notch",loading:!0})," Add"]}):Object(C.jsxs)(T.a,{color:"green",onClick:q,children:[Object(C.jsx)(k.a,{name:"checkmark"})," Add"]})]})]})},Q=function(e){var t=e.walletAddress,n=e.couponList;return Object(C.jsxs)(w.a,{divided:"vertically",children:[Object(C.jsx)(w.a.Row,{columns:1,children:Object(C.jsx)(w.a.Column,{children:Object(C.jsxs)(I.a,{as:"h3",children:[Object(C.jsx)(K,{walletAddress:t}),"\xa0 Coupon types"]})})}),Object(C.jsx)(w.a.Row,{children:n.map((function(e){return Object(C.jsx)(R,{coupon:e})}))})]})};n(90).config();var V=n(126),X=new(n(127))("https://api.baobab.klaytn.net:8651/");var Z=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a,s,r,c,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=n.trim()){e.next=2;break}return e.abrupt("return",{success:!1,status:"\u2757Please make sure all fields are completed before minting."});case 2:return(a=new Object).couponName=t.metadata.name,a.couponDescription=t.metadata.keyvalues.couponDescription,a.image="https://gateway.pinata.cloud/ipfs/".concat(t.ipfs_pin_hash),e.next=8,q(a);case 8:if((s=e.sent).success){e.next=11;break}return e.abrupt("return",{success:!1,status:"\ud83d\ude22 Something went wrong while uploading your tokenURI."});case 11:return r=s.pinataUrl,c=Math.random().toString(36),e.next=15,new X.eth.Contract(V,m);case 15:return window.contract=e.sent,i={to:m,from:window.ethereum.selectedAddress,data:window.contract.methods.issueCoupon(n,c,r).encodeABI()},e.prev=17,e.next=20,window.ethereum.request({method:"eth_sendTransaction",params:[i]});case 20:return u=e.sent,e.abrupt("return",{success:!0,rand:c,status:"\u2705 Check out your transaction on Etherscan: https://baobab.scope.klaytn.com/tx/"+u});case 24:return e.prev=24,e.t0=e.catch(17),e.abrupt("return",{success:!1,status:"\ud83d\ude25 Something went wrong: "+e.t0.message});case 27:case"end":return e.stop()}}),e,null,[[17,24]])})));return function(t,n){return e.apply(this,arguments)}}(),$=n(129),ee=n.n($),te=n(154),ne=n(213),ae=function(e){var t=e.couponList,n=Object(a.useState)(""),s=Object(l.a)(n,2),r=s[0],c=s[1],i=Object(a.useState)(""),d=Object(l.a)(i,2),p=d[0],j=d[1],b=Object(a.useState)(!1),m=Object(l.a)(b,2),h=m[0],O=m[1],x=Object(a.useState)(!1),f=Object(l.a)(x,2),y=f[0],g=f[1],v=Object(a.useState)(""),A=Object(l.a)(v,2),M=A[0],U=A[1],_=Object(a.useState)(""),L=Object(l.a)(_,2),R=L[0],F=L[1];Object(a.useEffect)(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(""),j("");case 2:case"end":return e.stop()}}),e)}))),[]);var z=ee.a.map(t,(function(e){return{key:e.metadata.name,text:e.metadata.name,value:e.metadata.name}})),D=function(){var e=Object(u.a)(o.a.mark((function e(){var n,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),n=ee.a.filter(t,(function(e){return e.metadata.name===r}))[0],e.next=4,Z(n,p);case 4:a=e.sent,s=a.rand,c=a.status,O(!1),U(c),F(s),g(!0),console.log(s),console.log(c);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(w.a,{divided:"vertically",verticalAlign:"middle",children:[Object(C.jsxs)(w.a.Row,{children:[Object(C.jsx)(w.a.Column,{floated:"left",width:7,children:Object(C.jsxs)(I.a,{as:"h3",children:[Object(C.jsx)(k.a.Group,{size:"big",children:Object(C.jsx)(k.a,{name:"send"})}),"\xa0 Mint coupons"]})}),Object(C.jsx)(w.a.Column,{floated:"right",width:9,children:Object(C.jsx)(w.a,{columns:1,children:Object(C.jsxs)(w.a.Column,{children:[Object(C.jsxs)(J.a,{children:[Object(C.jsx)(ne.a,{placeholder:"Select coupon",search:!0,selection:!0,options:z,onChange:function(e,t){c(t.value)},style:{width:"80%",marginBottom:"5px"}}),Object(C.jsx)(J.a.Field,{id:"form-input-control-name",control:W.a,placeholder:"User address",required:!0,onChange:function(e){j(e.target.value)},style:{width:"80%",marginBottom:"5px"}})]}),h?Object(C.jsxs)(T.a,{color:"green",children:[Object(C.jsx)(k.a,{name:"circle notch",loading:!0})," Mint"]}):Object(C.jsxs)(T.a,{color:"green",onClick:D,children:[Object(C.jsx)(k.a,{name:"checkmark"})," Mint"]})]})})})]}),Object(C.jsx)(w.a.Row,{}),Object(C.jsxs)(S.a,{closeIcon:!0,onClose:function(){return g(!1)},onOpen:function(){return g(!0)},open:y,centered:!0,children:[Object(C.jsx)(I.a,{icon:"archive",content:"Transaction result"}),Object(C.jsxs)(S.a.Content,{style:{textAlign:"center"},children:[Object(C.jsx)(te.a,{value:R}),Object(C.jsx)(S.a.Description,{children:Object(C.jsx)("p",{children:M})})]}),Object(C.jsx)(S.a.Actions,{children:Object(C.jsxs)(T.a,{color:"red",onClick:function(){return g(!1)},children:[Object(C.jsx)(k.a,{name:"remove"})," Close"]})})]})]})},se=function(e){var t=e.walletAddress,n=Object(a.useState)([]),s=Object(l.a)(n,2),r=s[0],c=s[1],i=Object(a.useState)([]),d=Object(l.a)(i,2),p=d[0],j=d[1];return Object(a.useEffect)(Object(u.a)(o.a.mark((function e(){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t);case 2:return(n=e.sent).success?c(n.pinList):console.log(n.message),e.next=6,y(t);case 6:(a=e.sent).success?j(a.couponUsageList):console.log(a.message);case 8:case"end":return e.stop()}}),e)}))),[]),Object(C.jsxs)("div",{children:[Object(C.jsx)(U,{mode:b,walletAddress:t,couponUsageList:p,setCouponUsageList:j}),Object(C.jsx)(ae,{couponList:r}),Object(C.jsx)(Q,{walletAddress:t,couponList:r})]})},re=function(e){var t=e.coupon;return Object(C.jsxs)(_.a,{centered:!0,children:[Object(C.jsx)(L.a,{src:"https://gateway.pinata.cloud/ipfs/".concat(t.ipfs_pin_hash),alt:t.name}),Object(C.jsxs)(_.a.Content,{textAlign:"center",children:[Object(C.jsx)(_.a.Header,{children:t.metadata.name}),Object(C.jsx)(_.a.Description,{children:t.metadata.keyvalues.couponDescription})]})]})},ce=function(e){e.walletAddress;return Object(C.jsx)("div",{})},ie=function(e){var t=e.walletAddress,n=e.couponList;return Object(C.jsxs)(w.a,{divided:"vertically",children:[Object(C.jsx)(w.a.Row,{columns:1,children:Object(C.jsx)(w.a.Column,{children:Object(C.jsxs)(I.a,{as:"h3",children:[Object(C.jsx)(ce,{walletAddress:t}),"\xa0 My coupons"]})})}),Object(C.jsx)(w.a.Row,{children:n.map((function(e){return Object(C.jsx)(re,{coupon:e})}))})]})},oe=n(126),ue=new(n(127))("https://api.baobab.klaytn.net:8651/"),le=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new ue.eth.Contract(oe,m);case 2:return window.contract=e.sent,e.prev=3,e.next=6,window.contract.methods.getUserCoupons().call();case 6:return t=e.sent,e.abrupt("return",{success:!0,tokenIds:t[0],couponURIs:t[1]});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",{success:!1,status:"\ud83d\ude25 Something went wrong with getUserCouponList: "+e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),de=function(e){var t=e.walletAddress,n=Object(a.useState)([]),s=Object(l.a)(n,2),r=s[0];s[1];return Object(a.useEffect)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:(t=e.sent).success?(console.log("success"),console.log(t.userAddresses),console.log(t.couponURIs)):console.log(t.message);case 4:case"end":return e.stop()}}),e)}))),[]),Object(C.jsxs)("div",{children:[Object(C.jsx)(U,{mode:j,walletAddress:t}),Object(C.jsx)(ie,{walletAddress:t,couponList:r})]})},pe=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=14;break}return e.prev=1,e.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:return t=e.sent,n={status:"\ud83d\udc46\ud83c\udffd Write a message in the text-field above.",address:t[0]},e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{address:"",status:"\ud83d\ude25 "+e.t0.message});case 12:e.next=15;break;case 14:return e.abrupt("return",{address:"",status:Object(C.jsx)("span",{children:Object(C.jsxs)("p",{children:[" ","\ud83e\udd8a"," ",Object(C.jsx)("a",{target:"_blank",href:"https://metamask.io/download.html",children:"You must install Metamask, a virtual Ethereum wallet, in your browser."})]})})});case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=17;break}return e.prev=1,e.next=4,window.ethereum.request({method:"eth_accounts"});case 4:if(!((t=e.sent).length>0)){e.next=9;break}return e.abrupt("return",{address:t[0],status:"\ud83d\udc46\ud83c\udffd Login"});case 9:return e.abrupt("return",{address:"",status:"\ud83e\udd8a Connect to Metamask using the top right button."});case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",{address:"",status:"\ud83d\ude25 "+e.t0.message});case 15:e.next=18;break;case 17:return e.abrupt("return",{address:"",status:Object(C.jsx)("span",{children:Object(C.jsxs)("p",{children:[" ","\ud83e\udd8a"," ",Object(C.jsx)("a",{target:"_blank",href:"https://metamask.io/download.html",children:"You must install Metamask, a virtual Ethereum wallet, in your browser."})]})})});case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),be=function(e){var t=e.setWalletAddress,n=e.setMode,s=e.setStatus,r=Object(a.useState)(!1),c=Object(l.a)(r,2),i=c[0],d=c[1];function j(){window.ethereum?window.ethereum.on("accountsChanged",(function(e){e.length>0?(t(e[0]),n(p)):t("")})):s(Object(C.jsxs)("p",{children:[" ","\ud83e\udd8a ",Object(C.jsx)("a",{target:"_blank",href:"https://metamask.io/download.html",children:"You must install MetaMask, a virtual Ethereum wallet, in your browser."})]}))}Object(a.useEffect)(Object(u.a)(o.a.mark((function e(){var a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:a=e.sent,r=a.address,c=a.status,t(r),s(c),""!==r&&n(p),j();case 9:case"end":return e.stop()}}),e)}))),[]);var b=function(){var e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,pe();case 3:a=e.sent,d(!1),s(a.status),t(a.address),""!==a.address&&n(p);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{children:Object(C.jsxs)(_.a,{onClick:b,centered:!0,children:[Object(C.jsx)("div",{style:{textAlign:"center",paddingTop:"30px",paddinBbottom:"30px"},children:i?Object(C.jsx)("div",{children:Object(C.jsxs)(k.a.Group,{size:"huge",children:[Object(C.jsx)(k.a,{loading:!0,size:"big",color:"black",name:"circle notch"}),Object(C.jsx)(k.a,{color:"black",name:"user"})]})}):Object(C.jsx)("div",{children:Object(C.jsxs)(k.a.Group,{size:"huge",children:[Object(C.jsx)(k.a,{size:"big",color:"black",name:"circle outline"}),Object(C.jsx)(k.a,{color:"black",name:"user"})]})})}),Object(C.jsxs)(_.a.Content,{textAlign:"center",children:[Object(C.jsx)(_.a.Header,{children:"Welcome!"}),Object(C.jsx)(_.a.Description,{children:"Log-in with your wallet"})]}),Object(C.jsx)(_.a.Content,{extra:!0,children:Object(C.jsxs)("a",{children:[Object(C.jsx)(k.a,{name:"users"}),"22 users logged-in"]})})]})})},me=function(e){var t=e.setMode;return Object(C.jsxs)(w.a,{children:[Object(C.jsx)(w.a.Column,{width:8,children:Object(C.jsxs)(_.a,{onClick:function(){t(b)},centered:!0,children:[Object(C.jsx)("div",{style:{textAlign:"center",paddingTop:"30px",paddingBottom:"30px"},children:Object(C.jsxs)(k.a.Group,{size:"huge",children:[Object(C.jsx)(k.a,{size:"big",color:"black",name:"circle outline"}),Object(C.jsx)(k.a,{color:"black",name:"home"})]})}),Object(C.jsxs)(_.a.Content,{textAlign:"center",children:[Object(C.jsx)(_.a.Header,{children:"Store"}),Object(C.jsx)(_.a.Description,{children:"Stores who will issue NFT coupons go here"})]})]})},1),Object(C.jsx)(w.a.Column,{width:8,children:Object(C.jsxs)(_.a,{onClick:function(){t(j)},centered:!0,children:[Object(C.jsx)("div",{style:{textAlign:"center",paddingTop:"30px",paddingBottom:"30px"},children:Object(C.jsxs)(k.a.Group,{size:"huge",children:[Object(C.jsx)(k.a,{size:"big",color:"black",name:"circle outline"}),Object(C.jsx)(k.a,{color:"black",name:"child"})]})}),Object(C.jsxs)(_.a.Content,{textAlign:"center",children:[Object(C.jsx)(_.a.Header,{children:"User"}),Object(C.jsx)(_.a.Description,{children:"Users who will use NFT coupons go here"})]})]})},2)]})},he=n.p+"static/media/test.01e9901b.jpeg",Oe=n(212),xe=n(215),fe=n(217),ye=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),c=Object(l.a)(r,2),i=c[0],m=c[1],h=Object(a.useState)(""),O=Object(l.a)(h,2),x=O[0],f=O[1],y=Object(a.useState)(!0),g=Object(l.a)(y,2),w=g[0],v=g[1],T=Object(a.useState)(!1),A=Object(l.a)(T,2),S=A[0],I=A[1],M=Object(a.useState)(!1),U=Object(l.a)(M,2),_=U[0],R=U[1];return Object(a.useEffect)(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(i),f(d);case 2:case"end":return e.stop()}}),e)}))),[]),Object(a.useEffect)(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x===d||x===p?(v(!0),I(!1),R(!1)):x===b?(v(!1),setTimeout((function(){I(!0),R(!1)}),1e3)):x===j&&(v(!1),setTimeout((function(){I(!1),R(!0)}),1e3));case 1:case"end":return e.stop()}}),e)}))),[x]),Object(C.jsxs)(Oe.a,{children:[Object(C.jsx)(xe.a,{open:w,transition:{animation:"fade up",duration:1e3},children:Object(C.jsxs)(D.a,{children:[Object(C.jsx)("div",{style:{backgroundColor:"black"},children:Object(C.jsx)(L.a,{src:he,alt:"Main Image",style:{minHeight:"140px",opacity:"0.9",brightness:"0.5"}})}),Object(C.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:x===d?Object(C.jsx)(be,{setWalletAddress:s,setMode:f,setStatus:m}):x===p?Object(C.jsx)(me,{setMode:f}):Object(C.jsx)("div",{})}),Object(C.jsxs)("div",{style:{position:"absolute",top:"10%",left:"0",color:"black",textAlign:"center",width:"100%"},children:[Object(C.jsxs)("p",{style:{fontSize:"40px",fontWeight:"bold"},children:["Make your own ",Object(C.jsx)("span",{style:{color:"red"},children:"NFT"})," coupon!"]}),Object(C.jsxs)(fe.a,{size:"huge",horizontal:!0,children:[Object(C.jsxs)(fe.a.Item,{children:[Object(C.jsx)(k.a,{name:"computer"}),Object(C.jsx)(fe.a.Content,{children:Object(C.jsx)(fe.a.Header,{children:"Free yourself from offline coupon"})})]}),Object(C.jsxs)(fe.a.Item,{children:[Object(C.jsx)(k.a,{name:"world"}),Object(C.jsx)(fe.a.Content,{children:Object(C.jsx)(fe.a.Header,{children:"No contracts with centralized platforms"})})]}),Object(C.jsxs)(fe.a.Item,{children:[Object(C.jsx)(k.a,{name:"wi-fi"}),Object(C.jsx)(fe.a.Content,{children:Object(C.jsx)(fe.a.Header,{children:"Promote your brand using NFT"})})]})]})]})]})}),Object(C.jsx)(xe.a,{open:S,transition:{animation:"fade up",duration:0},children:Object(C.jsx)(D.a,{children:Object(C.jsx)(se,{walletAddress:n})})}),Object(C.jsx)(xe.a,{open:_,transition:{animation:"fade up",duration:0},children:Object(C.jsx)(D.a,{children:Object(C.jsx)(de,{walletAddress:n})})})]})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,223)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(ye,{})}),document.getElementById("root")),ge()}},[[196,1,2]]]);
//# sourceMappingURL=main.445f803d.chunk.js.map